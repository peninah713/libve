<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FootballHub - Register / Login</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      background:#1a1d3a;
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:5vh 1rem;
    }

    .auth-container{
      background:#252947;
      border-radius:20px;
      box-shadow:0 20px 60px rgba(0,0,0,.4);
      width:100%;
      max-width:520px;
      padding:2.5rem;
      animation:slideUp .6s ease;
      animation-fill-mode:forwards;
    }
    @keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:none}}

    .auth-header{text-align:center;margin-bottom:1.5rem}
    .logo{display:inline-flex;gap:.75rem;align-items:center;margin-bottom:1rem}
    .logo-icon{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;
      font-size:2rem;background:linear-gradient(135deg,#ff1744,#f50057)}
    .logo-text{font-size:2rem;font-weight:700;color:#fff}
    .auth-header h1{font-size:1.6rem;color:#fff;margin-bottom:.25rem}
    .auth-header p{color:#a0a3bd}

    .tabs{display:flex;gap:.5rem;margin:1rem 0 1.25rem;background:#1a1d3a;padding:.375rem;border-radius:10px}
    .tab{flex:1;padding:.85rem;border-radius:8px;background:transparent;border:0;cursor:pointer;
      color:#a0a3bd;font-weight:600;transition:all .25s;font-size:1rem}
    .tab:hover{color:#fff}
    .tab.active{background:#ff1744;color:#fff;box-shadow:0 2px 8px rgba(255,23,68,.25)}

    .forms-wrapper{
      display:block;
      width:100%;
      position:relative;
    }

    .form-section{
      opacity:0;
      transform:translateX(-20px);
      transition:opacity .4s ease, transform .4s ease;
      position:absolute;
      width:100%;
      pointer-events:none;
    }
    .form-section.active{
      opacity:1;
      transform:translateX(0);
      position:relative;
      pointer-events:auto;
    }

    .form-group{margin-bottom:1rem}
    label{display:block;margin-bottom:.45rem;color:#fff;font-weight:500;font-size:.94rem}
    input,select,textarea{
      width:100%;padding:.85rem 1rem;border:2px solid #3a3f5c;border-radius:8px;background:#1a1d3a;color:#fff;
      transition:all .2s;font-size:1rem
    }
    input::placeholder{color:#6b6f8f}
    input:focus,select:focus,textarea:focus{outline:none;border-color:#ff1744;box-shadow:0 0 0 3px rgba(255,23,68,.12)}

    .btn{width:100%;padding:1rem;border-radius:8px;border:0;font-weight:600;cursor:pointer;transition:all .2s}
    .btn-primary{background:#ff1744;color:#fff;margin-bottom:.6rem}
    .btn-primary:hover:not(:disabled){background:#f50057;transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,23,68,.35)}
    .btn-primary:disabled{opacity:.6;cursor:not-allowed}
    .btn-guest{background:transparent;color:#fff;border:2px solid #3a3f5c}
    .btn-guest:hover{background:#3a3f5c}

    .password-strength{height:4px;background:#3a3f5c;border-radius:2px;overflow:hidden;margin-top:.5rem}
    .password-strength-bar{height:100%;width:0;transition:all .3s;border-radius:2px}
    .password-strength-text{font-size:.78rem;color:#a0a3bd;margin-top:.25rem}

    .error-message{color:#ff1744;font-size:.9rem;margin-top:.5rem;display:none}

    .footer-text{text-align:center;color:#a0a3bd;font-size:.9rem;margin-top:.75rem}
    .footer-text a{color:#ff1744;text-decoration:none;font-weight:600}
    .footer-text a:hover{text-decoration:underline}

    @media (max-width:640px){.auth-container{padding:1.5rem}.logo-text{font-size:1.6rem}}
  </style>
</head>
<body>
  <div class="auth-container" id="authContainer">
    <div class="auth-header">
      <div class="logo">
        <div class="logo-icon">âš½</div>
        <div class="logo-text">FootballHub</div>
      </div>
      <h1>Welcome to FootballHub</h1>
      <p>Start your football journey today</p>
    </div>

    <div class="tabs" role="tablist" aria-label="Authentication Tabs">
      <button class="tab" id="loginTab" onclick="switchTab('login')" aria-controls="loginForm" role="tab">Sign In</button>
      <button class="tab active" id="registerTab" onclick="switchTab('register')" aria-controls="registerForm" role="tab">Create Account</button>
    </div>

    <div class="forms-wrapper">
      <!-- LOGIN FORM -->
      <div class="form-section" id="loginForm" aria-hidden="true">
        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" placeholder="you@email.com" required>
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input id="loginPassword" type="password" placeholder="Enter your password" required>
            <div class="error-message" id="loginError"></div>
          </div>
          <button class="btn btn-primary" type="submit">Sign In</button>
          <button type="button" class="btn btn-guest" onclick="guestLogin()">ðŸ‘¤ Continue as Guest</button>
        </form>
        <div class="footer-text"><a href="#">Forgot password?</a></div>
      </div>

      <!-- REGISTER FORM -->
      <div class="form-section active" id="registerForm" aria-hidden="false">
        <form onsubmit="handleRegister(event)">
          <div class="form-group">
            <label for="fullName">Full Name</label>
            <input id="fullName" type="text" placeholder="John Doe" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input id="email" type="email" placeholder="you@email.com" required>
            <div class="error-message" id="emailError"></div>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input id="phone" type="tel" placeholder="+254 700 000000" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input id="password" type="password" placeholder="Create a strong password" oninput="checkPasswordStrength(this.value)" required>
            <div class="password-strength"><div id="strengthBar" class="password-strength-bar"></div></div>
            <div id="strengthText" class="password-strength-text"></div>
          </div>
          <button id="registerBtn" class="btn btn-primary" type="submit">Create Account</button>
          <button type="button" class="btn btn-guest" onclick="guestLogin()">ðŸ‘¤ Continue as Guest</button>
        </form>
        <div class="footer-text">By creating an account you agree to our <a href="#">Terms</a> and <a href="#">Privacy Policy</a></div>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tab){
      const loginTab = document.getElementById('loginTab');
      const registerTab = document.getElementById('registerTab');
      const loginForm = document.getElementById('loginForm');
      const registerForm = document.getElementById('registerForm');

      if(tab === 'login'){
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
        loginForm.classList.add('active');
        loginForm.setAttribute('aria-hidden','false');
        registerForm.classList.remove('active');
        registerForm.setAttribute('aria-hidden','true');
      } else {
        registerTab.classList.add('active');
        loginTab.classList.remove('active');
        registerForm.classList.add('active');
        registerForm.setAttribute('aria-hidden','false');
        loginForm.classList.remove('active');
        loginForm.setAttribute('aria-hidden','true');
      }
    }

    function checkPasswordStrength(password){
      const bar = document.getElementById('strengthBar');
      const text = document.getElementById('strengthText');
      let s=0;
      if(password.length>=8) s++;
      if(/[a-z]/.test(password)&&/[A-Z]/.test(password)) s++;
      if(/[0-9]/.test(password)) s++;
      if(/[^A-Za-z0-9]/.test(password)) s++;
      const colors=['#ff1744','#ff6b35','#ffd93d','#6bcf7f'];
      const texts=['Weak','Fair','Good','Strong'];
      const widths=['25%','50%','75%','100%'];
      if(!password){bar.style.width='0%';text.textContent='';return;}
      const idx=Math.min(s,3);
      bar.style.width=widths[idx];
      bar.style.background=colors[idx];
      text.textContent=texts[idx];
      text.style.color=colors[idx];
    }

    function handleLogin(e){
      e.preventDefault();
      const email=document.getElementById('loginEmail').value;
      const password=document.getElementById('loginPassword').value;
      const error=document.getElementById('loginError');
      error.style.display='none';
      
      try {
        const stored = JSON.parse(localStorage.getItem('footballhub_user') || 'null');
        if(!stored){ 
          error.textContent='No account found. Please register first.'; 
          error.style.display='block'; 
          return; 
        }
        if(stored.email===email && stored.password===password){
          window.location.href='home.html';
        } else {
          error.textContent='Invalid email or password.'; 
          error.style.display='block';
        }
      } catch(err) {
        error.textContent='Login error. Please try again.'; 
        error.style.display='block';
      }
    }

    function handleRegister(e){
      e.preventDefault();
      const email=document.getElementById('email').value;
      const emailError=document.getElementById('emailError');
      const registerBtn=document.getElementById('registerBtn');
      emailError.style.display='none';
      
      try {
        const existing = JSON.parse(localStorage.getItem('footballhub_user') || 'null');
        if(existing && existing.email===email){ 
          emailError.textContent='This email is already registered. Please sign in.'; 
          emailError.style.display='block'; 
          return; 
        }
      } catch(err) {
        console.error('Error checking existing user:', err);
      }
      
      registerBtn.disabled=true; 
      registerBtn.textContent='Creating Account...';
      
      const userData={
        fullName:document.getElementById('fullName').value,
        email:email,
        phone:document.getElementById('phone').value,
        password:document.getElementById('password').value,
        registeredAt:new Date().toISOString(),
        isGuest:false
      };
      
      try {
        localStorage.setItem('footballhub_user',JSON.stringify(userData));
        localStorage.setItem('footballhub_pending_user',JSON.stringify(userData));
        setTimeout(()=>{
          window.location.href='profile-setup.html';
        },700);
      } catch(err) {
        emailError.textContent='Registration failed. Please try again.';
        emailError.style.display='block';
        registerBtn.disabled=false;
        registerBtn.textContent='Create Account';
      }
    }

    function guestLogin(){
      const guest={
        fullName:'Guest User',
        email:'guest@footballhub.com',
        phone:'',
        isGuest:true,
        registeredAt:new Date().toISOString()
      };
      try {
        localStorage.setItem('footballhub_user',JSON.stringify(guest));
        localStorage.setItem('footballhub_onboarding_completed','true');
        localStorage.setItem('footballhub_guest_mode','true');
        window.location.href='home.html';
      } catch(err) {
        console.error('Guest login error:', err);
      }
    }

    window.addEventListener('load',()=>{
      try {
        const user = JSON.parse(localStorage.getItem('footballhub_user') || 'null');
        const onboarding = localStorage.getItem('footballhub_onboarding_completed');
        if(user && onboarding==='true'){ 
          window.location.href='home.html'; 
        }
      } catch(err) {
        console.error('Load error:', err);
      }
    });
  </script>
</body>
</html>
